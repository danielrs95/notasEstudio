# React: Software Architecture

Es el estudio de estructura, organizacion y patrones del desarrollo de un proyecto, primeramente los que impactan la productividad de desarrollo en el tiempo

![1](images/11_1.png)

Software architecture es pensado para ser independiente de la tecnologia que estemos usando, miraremos ejemplos con React

Hay 5 temas principales:

1. Server-side rendering
2. State management: Como manejar apropiadamente la data
3. Data loading: Cual es la relacion apropiada entre front y back y como se comunican mas eficientemente, especialmente en el contexto de server-side rendering
4. Code splitting: Como entregamos eficientemente el codigo al cliente
5. Project organization: Como organizar el codigo de tal manera que sea facil para otros programadores

## Server-Side Rendering

En el flujo normal de una aplicacion de React, el cliente hace una peticion al servidor y carga el `index.html` el cual no contiene nada, ese index le dice al explorador que cargue los scripts de React, que son los que en realidad renderizan todos los elementos HTML en la pagina

Server-Side Rendering es cuando el servidor es el encargado de correr los scripts de React y renderizar los elementos

![2](images/11_2.png)

### Basic React SSR

Teniendo una aplicacion basica de react empezaremos a prepararla para que haga server side rendering

`npm install --save-dev @babel/core @babel/node @babel/preset-env @babel/preset-react nodemon`

`npm install express`

```js
//server.js
import express from 'express';
import React from 'react';
import { renderToString } from 'react-dom/server';

const app = express();

// Todas las rutas devolvera el HTML
app.get('/*', (req, res) => {
  // render es una funcion a la que le podemos pasar jsx y lo renderizara como html
  const reactApp = renderToString(<h1>Hello from the server side</h1>);

  return res.send(`
    <html>
      <body>
        <div id="root">${reactApp}</div>
      </body>
    </html>
    `);
});

app.listen(8080, () => {
  console.log('Server listening on port 8080');
});
```

```json
// .babelrc
{
  "presets": ["@babel/preset-env", "@babel/preset-react"]
}
```

Corremos la aplicacion con `npx babel-node server.js`
